
<div class="user-list-content">

  <div class="container-fluid manage-user-row">
    <div class="row d-flex align-items-center">
      <div class="col menu-text">MANAGE USERS</div>
      <div class="col">
        <div class="input-group">
          <button class="btn btn-outline-secondary">
            <i class="bi bi-search"></i>
          </button>
          <input type="text" class="form-control" placeholder="Search.." #search (input)="onSearchUser(search.value)">
        </div>
      </div>
    </div>
  </div>

  @if(isLoading) {
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-4 offset-md-4 text-center">User data is loading, please be patient....</div>
      </div>
    </div>
  }
  @else {
      <div class="container-fluid">
        <!-- User-Menu Rows -->
        <div class="row d-flex align-items-center text-shadow">
          <div class="col id-col">
            ID
            <button class="btn btn-sm" type="button" (click)="sortById()">
              @if(idSort === 'asc') {
                <i class="bi bi-arrow-down"></i>
              }
              @if (idSort === 'desc'){
                <i class="bi bi-arrow-up"></i>
              } @else if(idSort === undefined){
                <i class="bi bi-arrow-down-up"></i>
              }
            </button>
          </div>
          <div class="col">
            Image
          </div>
          <div class="col">
            First name
            <button class="btn btn-sm" type="button" (click)="sortByName()">
              @if(nameSort === 'asc') {
                <i class="bi bi-arrow-down"></i>
              }
              @if (nameSort === 'desc'){
                <i class="bi bi-arrow-up"></i>
              } @else if(nameSort === undefined){
                <i class="bi bi-arrow-down-up"></i>
              }
            </button>
          </div>
          <div class="col">
            Last name
          </div>
          <div class="col">
            Email
          </div>
          <div class="col">
            Details
          </div>
        </div>
        <hr class="my-3 line-shadow">
        <!-- User Rows -->
        @for (u of filteredUsers | paginate: { itemsPerPage: itemsPerPage, currentPage: page }; track u.id) {
          <div class="row d-flex align-items-center user-row-item">
            <div class="col id-col">#{{ u.id!.length > 5 ? (u.id | slice:0:5) + '...' : u.id }}</div>
            <div class="col">{{ u.role }}</div>
            <div class="col">{{ u.firstName }}</div>
            <div class="col">{{ u.lastName }}</div>
            <div class="col user-description">{{ u.email }}</div>
            <div class="col">
              <button class="btn btn-outline-secondary btn-sm" (click)="openDetailsModal(u)">
                <i class="bi bi-three-dots"></i>
              </button>
            </div>
          </div>
          <hr class="my-3">
        }
        @empty {
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-4 offset-md-4 text-center">No users to show yet.</div>
            </div>
          </div>
        }
      </div>
      <!-- Pagination Controls -->
      <div class="pagination-container">
        <pagination-controls (pageChange)="page = $event" class="pagination-controls"></pagination-controls>
        <select #targetValue (change)="onItemsPerPageChange(targetValue.value)" class="items-per-page-dropdown">
          @for (option of perPageOptions; track option) {
            <option [value]="option" [selected]="option === itemsPerPage">{{ option }}</option>
          }
        </select>
      </div>
  }

</div>
